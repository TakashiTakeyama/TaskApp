<%= form_with(model:@blog, local: true) do |form| %>
  <% if @blog.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@blog.errors.count, "#{t('view.error')}") %></h2>

      <ul>
        <% @blog.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>

  <div class="field">
    <%= form.label :details %>
    <%= form.text_area :details %>
  </div>

  <div class="field">
    <%= form.label :expired_at %>
    <%= form.datetime_select :expired_at %>
  </div>

  <div class="field">
    <%= form.label :state %>
    <%= form.select :state,[['未着手',"未着手"],['着手中',"着手中"],['完了',"完了"]], include_blank: "指定無し" %>
  </div>

  <div class="field">
    <%= form.label :priority %>
    <%= form.select :priority, Blog.priorities.keys.to_a, {},  include_blank: "指定無し" %>
  </div>

  <% Label.all.each do |label| %>
    <% if  label.user_id.nil? %>
      <%= form.check_box :label_ids, { multiple: true, checked: label[:checked], disabled: label[:disabled], include_hidden: false }, label[:id] %>
    <label><%= label.label_name %></label>
    <% end %>

    <% if label.user_id == current_user.id %>
      <%= form.check_box :label_ids, { multipie: true, checked: label[:checked], disabled: label[:disabled], include_hidden: false }, label[:id] %>
      <label><%= label.label_name %></label>
    <% end %>
  <% end %>

  <div class="actions">
    <%= form.submit %>
  </div>
<% end %>

<%= link_to "#{t('view.back')}", blogs_path %>

<%# Label.all.each do |label| %>
  <%#= form.check_box :label_ids, { multiple: true, checked: @task.labels.find_by(id: label.id).present?, include_hidden: false }, label[:id] %>
<!--  <label class='badge badge-secondary'><%#= label.name %></label>-->
<%# end %>